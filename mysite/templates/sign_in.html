{% include 'base.html' %}

{% block title %}
<title>註冊</title>
<script type="text/javascript">
	var cities = [
		{ value: "臺北市" },
		{ value: "新北市" },
		{ value: "基隆市" },
		{ value: "桃園市" },
		{ value: "新竹縣" },
		{ value: "新竹市" },
		{ value: "苗栗縣" },
		{ value: "臺中市" },
		{ value: "南投縣" },
		{ value: "彰化縣" },
		{ value: "雲林縣" },
		{ value: "嘉義縣" },
		{ value: "嘉義市" },
		{ value: "臺南市" },
		{ value: "高雄市" },
		{ value: "屏東縣" },
		{ value: "宜蘭縣" },
		{ value: "花蓮縣" },
		{ value: "臺東縣" },
		{ value: "澎湖縣" },
		{ value: "金門縣" },
		{ value: "連江縣" }
	]

	var areas = [
		{ city: '臺北市', value: '中正區' },
		{ city: '臺北市', value: '大同區' },
		{ city: '臺北市', value: '中山區' },
		{ city: '臺北市', value: '萬華區' },
		{ city: '臺北市', value: '信義區' },
		{ city: '臺北市', value: '松山區' },
		{ city: '臺北市', value: '大安區' },
		{ city: '臺北市', value: '南港區' },
		{ city: '臺北市', value: '北投區' },
		{ city: '臺北市', value: '內湖區' },
		{ city: '臺北市', value: '士林區' },
		{ city: '臺北市', value: '文山區' },
		{ city: '新北市', value: '板橋區' },
		{ city: '新北市', value: '新莊區' },
		{ city: '新北市', value: '泰山區' },
		{ city: '新北市', value: '林口區' },
		{ city: '新北市', value: '淡水區' },
		{ city: '新北市', value: '金山區' },
		{ city: '新北市', value: '八里區' },
		{ city: '新北市', value: '萬里區' },
		{ city: '新北市', value: '石門區' },
		{ city: '新北市', value: '三芝區' },
		{ city: '新北市', value: '瑞芳區' },
		{ city: '新北市', value: '汐止區' },
		{ city: '新北市', value: '平溪區' },
		{ city: '新北市', value: '貢寮區' },
		{ city: '新北市', value: '雙溪區' },
		{ city: '新北市', value: '深坑區' },
		{ city: '新北市', value: '石碇區' },
		{ city: '新北市', value: '新店區' },
		{ city: '新北市', value: '坪林區' },
		{ city: '新北市', value: '烏來區' },
		{ city: '新北市', value: '中和區' },
		{ city: '新北市', value: '永和區' },
		{ city: '新北市', value: '土城區' },
		{ city: '新北市', value: '三峽區' },
		{ city: '新北市', value: '樹林區' },
		{ city: '新北市', value: '鶯歌區' },
		{ city: '新北市', value: '三重區' },
		{ city: '新北市', value: '蘆洲區' },
		{ city: '新北市', value: '五股區' },
		{ city: '基隆市', value: '仁愛區' },
		{ city: '基隆市', value: '中正區' },
		{ city: '基隆市', value: '信義區' },
		{ city: '基隆市', value: '中山區' },
		{ city: '基隆市', value: '安樂區' },
		{ city: '基隆市', value: '暖暖區' },
		{ city: '基隆市', value: '七堵區' },
		{ city: '桃園市', value: '桃園區' },
		{ city: '桃園市', value: '中壢區' },
		{ city: '桃園市', value: '平鎮區' },
		{ city: '桃園市', value: '八德區' },
		{ city: '桃園市', value: '楊梅區' },
		{ city: '桃園市', value: '蘆竹區' },
		{ city: '桃園市', value: '龜山區' },
		{ city: '桃園市', value: '龍潭區' },
		{ city: '桃園市', value: '大溪區' },
		{ city: '桃園市', value: '大園區' },
		{ city: '桃園市', value: '觀音區' },
		{ city: '桃園市', value: '新屋區' },
		{ city: '桃園市', value: '復興區' },
		{ city: '新竹縣', value: '竹北市' },
		{ city: '新竹縣', value: '竹東鎮' },
		{ city: '新竹縣', value: '新埔鎮' },
		{ city: '新竹縣', value: '關西鎮' },
		{ city: '新竹縣', value: '峨眉鄉' },
		{ city: '新竹縣', value: '寶山鄉' },
		{ city: '新竹縣', value: '北埔鄉' },
		{ city: '新竹縣', value: '橫山鄉' },
		{ city: '新竹縣', value: '芎林鄉' },
		{ city: '新竹縣', value: '湖口鄉' },
		{ city: '新竹縣', value: '新豐鄉' },
		{ city: '新竹縣', value: '尖石鄉' },
		{ city: '新竹縣', value: '五峰鄉' },
		{ city: '新竹市', value: '東區' },
		{ city: '新竹市', value: '北區' },
		{ city: '新竹市', value: '香山區' },
		{ city: '苗栗縣', value: '苗栗市' },
		{ city: '苗栗縣', value: '通霄鎮' },
		{ city: '苗栗縣', value: '苑裡鎮' },
		{ city: '苗栗縣', value: '竹南鎮' },
		{ city: '苗栗縣', value: '頭份鎮' },
		{ city: '苗栗縣', value: '後龍鎮' },
		{ city: '苗栗縣', value: '卓蘭鎮' },
		{ city: '苗栗縣', value: '西湖鄉' },
		{ city: '苗栗縣', value: '頭屋鄉' },
		{ city: '苗栗縣', value: '公館鄉' },
		{ city: '苗栗縣', value: '銅鑼鄉' },
		{ city: '苗栗縣', value: '三義鄉' },
		{ city: '苗栗縣', value: '造橋鄉' },
		{ city: '苗栗縣', value: '三灣鄉' },
		{ city: '苗栗縣', value: '南庄鄉' },
		{ city: '苗栗縣', value: '大湖鄉' },
		{ city: '苗栗縣', value: '獅潭鄉' },
		{ city: '苗栗縣', value: '泰安鄉' },
		{ city: '臺中市', value: '中區' },
		{ city: '臺中市', value: '東區' },
		{ city: '臺中市', value: '南區' },
		{ city: '臺中市', value: '西區' },
		{ city: '臺中市', value: '北區' },
		{ city: '臺中市', value: '北屯區' },
		{ city: '臺中市', value: '西屯區' },
		{ city: '臺中市', value: '南屯區' },
		{ city: '臺中市', value: '太平區' },
		{ city: '臺中市', value: '大里區' },
		{ city: '臺中市', value: '霧峰區' },
		{ city: '臺中市', value: '烏日區' },
		{ city: '臺中市', value: '豐原區' },
		{ city: '臺中市', value: '后里區' },
		{ city: '臺中市', value: '東勢區' },
		{ city: '臺中市', value: '石岡區' },
		{ city: '臺中市', value: '新社區' },
		{ city: '臺中市', value: '和平區' },
		{ city: '臺中市', value: '神岡區' },
		{ city: '臺中市', value: '潭子區' },
		{ city: '臺中市', value: '大雅區' },
		{ city: '臺中市', value: '大肚區' },
		{ city: '臺中市', value: '龍井區' },
		{ city: '臺中市', value: '沙鹿區' },
		{ city: '臺中市', value: '梧棲區' },
		{ city: '臺中市', value: '清水區' },
		{ city: '臺中市', value: '大甲區' },
		{ city: '臺中市', value: '外埔區' },
		{ city: '臺中市', value: '大安區' },
		{ city: '南投縣', value: '南投市' },
		{ city: '南投縣', value: '埔里鎮' },
		{ city: '南投縣', value: '草屯鎮' },
		{ city: '南投縣', value: '竹山鎮' },
		{ city: '南投縣', value: '集集鎮' },
		{ city: '南投縣', value: '名間鄉' },
		{ city: '南投縣', value: '鹿谷鄉' },
		{ city: '南投縣', value: '中寮鄉' },
		{ city: '南投縣', value: '魚池鄉' },
		{ city: '南投縣', value: '國姓鄉' },
		{ city: '南投縣', value: '水里鄉' },
		{ city: '南投縣', value: '信義鄉' },
		{ city: '南投縣', value: '仁愛鄉' },
		{ city: '彰化縣', value: '彰化市' },
		{ city: '彰化縣', value: '員林鎮' },
		{ city: '彰化縣', value: '和美鎮' },
		{ city: '彰化縣', value: '鹿港鎮' },
		{ city: '彰化縣', value: '溪湖鎮' },
		{ city: '彰化縣', value: '二林鎮' },
		{ city: '彰化縣', value: '田中鎮' },
		{ city: '彰化縣', value: '北斗鎮' },
		{ city: '彰化縣', value: '花壇鄉' },
		{ city: '彰化縣', value: '芬園鄉' },
		{ city: '彰化縣', value: '大村鄉' },
		{ city: '彰化縣', value: '永靖鄉' },
		{ city: '彰化縣', value: '伸港鄉' },
		{ city: '彰化縣', value: '線西鄉' },
		{ city: '彰化縣', value: '福興鄉' },
		{ city: '彰化縣', value: '秀水鄉' },
		{ city: '彰化縣', value: '埔心鄉' },
		{ city: '彰化縣', value: '埔鹽鄉' },
		{ city: '彰化縣', value: '大城鄉' },
		{ city: '彰化縣', value: '芳苑鄉' },
		{ city: '彰化縣', value: '竹塘鄉' },
		{ city: '彰化縣', value: '社頭鄉' },
		{ city: '彰化縣', value: '二水鄉' },
		{ city: '彰化縣', value: '田尾鄉' },
		{ city: '彰化縣', value: '埤頭鄉' },
		{ city: '彰化縣', value: '溪州鄉' },
		{ city: '雲林縣', value: '斗六市' },
		{ city: '雲林縣', value: '斗南鎮' },
		{ city: '雲林縣', value: '虎尾鎮' },
		{ city: '雲林縣', value: '西螺鎮' },
		{ city: '雲林縣', value: '土庫鎮' },
		{ city: '雲林縣', value: '北港鎮' },
		{ city: '雲林縣', value: '莿桐鄉' },
		{ city: '雲林縣', value: '林內鄉' },
		{ city: '雲林縣', value: '古坑鄉' },
		{ city: '雲林縣', value: '大埤鄉' },
		{ city: '雲林縣', value: '崙背鄉' },
		{ city: '雲林縣', value: '二崙鄉' },
		{ city: '雲林縣', value: '麥寮鄉' },
		{ city: '雲林縣', value: '臺西鄉' },
		{ city: '雲林縣', value: '東勢鄉' },
		{ city: '雲林縣', value: '褒忠鄉' },
		{ city: '雲林縣', value: '四湖鄉' },
		{ city: '雲林縣', value: '口湖鄉' },
		{ city: '雲林縣', value: '水林鄉' },
		{ city: '雲林縣', value: '元長鄉' },
		{ city: '嘉義縣', value: '太保市' },
		{ city: '嘉義縣', value: '朴子市' },
		{ city: '嘉義縣', value: '布袋鎮' },
		{ city: '嘉義縣', value: '大林鎮' },
		{ city: '嘉義縣', value: '民雄鄉' },
		{ city: '嘉義縣', value: '溪口鄉' },
		{ city: '嘉義縣', value: '新港鄉' },
		{ city: '嘉義縣', value: '六腳鄉' },
		{ city: '嘉義縣', value: '東石鄉' },
		{ city: '嘉義縣', value: '義竹鄉' },
		{ city: '嘉義縣', value: '鹿草鄉' },
		{ city: '嘉義縣', value: '水上鄉' },
		{ city: '嘉義縣', value: '中埔鄉' },
		{ city: '嘉義縣', value: '竹崎鄉' },
		{ city: '嘉義縣', value: '梅山鄉' },
		{ city: '嘉義縣', value: '番路鄉' },
		{ city: '嘉義縣', value: '大埔鄉' },
		{ city: '嘉義縣', value: '阿里山鄉' },
		{ city: '嘉義市', value: '東區' },
		{ city: '嘉義市', value: '西區' },
		{ city: '臺南市', value: '中西區' },
		{ city: '臺南市', value: '東區' },
		{ city: '臺南市', value: '南區' },
		{ city: '臺南市', value: '北區' },
		{ city: '臺南市', value: '安平區' },
		{ city: '臺南市', value: '安南區' },
		{ city: '臺南市', value: '永康區' },
		{ city: '臺南市', value: '歸仁區' },
		{ city: '臺南市', value: '新化區' },
		{ city: '臺南市', value: '左鎮區' },
		{ city: '臺南市', value: '玉井區' },
		{ city: '臺南市', value: '楠西區' },
		{ city: '臺南市', value: '南化區' },
		{ city: '臺南市', value: '仁德區' },
		{ city: '臺南市', value: '關廟區' },
		{ city: '臺南市', value: '龍崎區' },
		{ city: '臺南市', value: '官田區' },
		{ city: '臺南市', value: '麻豆區' },
		{ city: '臺南市', value: '佳里區' },
		{ city: '臺南市', value: '西港區' },
		{ city: '臺南市', value: '七股區' },
		{ city: '臺南市', value: '將軍區' },
		{ city: '臺南市', value: '學甲區' },
		{ city: '臺南市', value: '北門區' },
		{ city: '臺南市', value: '新營區' },
		{ city: '臺南市', value: '後壁區' },
		{ city: '臺南市', value: '白河區' },
		{ city: '臺南市', value: '東山區' },
		{ city: '臺南市', value: '六甲區' },
		{ city: '臺南市', value: '下營區' },
		{ city: '臺南市', value: '柳營區' },
		{ city: '臺南市', value: '鹽水區' },
		{ city: '臺南市', value: '善化區' },
		{ city: '臺南市', value: '大內區' },
		{ city: '臺南市', value: '山上區' },
		{ city: '臺南市', value: '新市區' },
		{ city: '臺南市', value: '安定區' },
		{ city: '高雄市', value: '楠梓區' },
		{ city: '高雄市', value: '左營區' },
		{ city: '高雄市', value: '鼓山區' },
		{ city: '高雄市', value: '三民區' },
		{ city: '高雄市', value: '鹽埕區' },
		{ city: '高雄市', value: '前金區' },
		{ city: '高雄市', value: '新興區' },
		{ city: '高雄市', value: '苓雅區' },
		{ city: '高雄市', value: '前鎮區' },
		{ city: '高雄市', value: '小港區' },
		{ city: '高雄市', value: '旗津區' },
		{ city: '高雄市', value: '鳳山區' },
		{ city: '高雄市', value: '大寮區' },
		{ city: '高雄市', value: '鳥松區' },
		{ city: '高雄市', value: '林園區' },
		{ city: '高雄市', value: '仁武區' },
		{ city: '高雄市', value: '大樹區' },
		{ city: '高雄市', value: '大社區' },
		{ city: '高雄市', value: '岡山區' },
		{ city: '高雄市', value: '路竹區' },
		{ city: '高雄市', value: '橋頭區' },
		{ city: '高雄市', value: '梓官區' },
		{ city: '高雄市', value: '彌陀區' },
		{ city: '高雄市', value: '永安區' },
		{ city: '高雄市', value: '燕巢區' },
		{ city: '高雄市', value: '田寮區' },
		{ city: '高雄市', value: '阿蓮區' },
		{ city: '高雄市', value: '茄萣區' },
		{ city: '高雄市', value: '湖內區' },
		{ city: '高雄市', value: '旗山區' },
		{ city: '高雄市', value: '美濃區' },
		{ city: '高雄市', value: '內門區' },
		{ city: '高雄市', value: '杉林區' },
		{ city: '高雄市', value: '甲仙區' },
		{ city: '高雄市', value: '六龜區' },
		{ city: '高雄市', value: '茂林區' },
		{ city: '高雄市', value: '桃源區' },
		{ city: '高雄市', value: '那瑪夏區' },
		{ city: '屏東縣', value: '屏東市' },
		{ city: '屏東縣', value: '潮州鎮' },
		{ city: '屏東縣', value: '東港鎮' },
		{ city: '屏東縣', value: '恆春鎮' },
		{ city: '屏東縣', value: '萬丹鄉' },
		{ city: '屏東縣', value: '長治鄉' },
		{ city: '屏東縣', value: '麟洛鄉' },
		{ city: '屏東縣', value: '九如鄉' },
		{ city: '屏東縣', value: '里港鄉' },
		{ city: '屏東縣', value: '鹽埔鄉' },
		{ city: '屏東縣', value: '高樹鄉' },
		{ city: '屏東縣', value: '萬巒鄉' },
		{ city: '屏東縣', value: '內埔鄉' },
		{ city: '屏東縣', value: '竹田鄉' },
		{ city: '屏東縣', value: '新埤鄉' },
		{ city: '屏東縣', value: '枋寮鄉' },
		{ city: '屏東縣', value: '新園鄉' },
		{ city: '屏東縣', value: '崁頂鄉' },
		{ city: '屏東縣', value: '林邊鄉' },
		{ city: '屏東縣', value: '南州鄉' },
		{ city: '屏東縣', value: '佳冬鄉' },
		{ city: '屏東縣', value: '琉球鄉' },
		{ city: '屏東縣', value: '車城鄉' },
		{ city: '屏東縣', value: '滿州鄉' },
		{ city: '屏東縣', value: '枋山鄉' },
		{ city: '屏東縣', value: '霧台鄉' },
		{ city: '屏東縣', value: '瑪家鄉' },
		{ city: '屏東縣', value: '泰武鄉' },
		{ city: '屏東縣', value: '來義鄉' },
		{ city: '屏東縣', value: '春日鄉' },
		{ city: '屏東縣', value: '獅子鄉' },
		{ city: '屏東縣', value: '牡丹鄉' },
		{ city: '屏東縣', value: '三地門鄉' },
		{ city: '宜蘭縣', value: '宜蘭市' },
		{ city: '宜蘭縣', value: '羅東鎮' },
		{ city: '宜蘭縣', value: '蘇澳鎮' },
		{ city: '宜蘭縣', value: '頭城鎮' },
		{ city: '宜蘭縣', value: '礁溪鄉' },
		{ city: '宜蘭縣', value: '壯圍鄉' },
		{ city: '宜蘭縣', value: '員山鄉' },
		{ city: '宜蘭縣', value: '冬山鄉' },
		{ city: '宜蘭縣', value: '五結鄉' },
		{ city: '宜蘭縣', value: '三星鄉' },
		{ city: '宜蘭縣', value: '大同鄉' },
		{ city: '宜蘭縣', value: '南澳鄉' },
		{ city: '花蓮縣', value: '花蓮市' },
		{ city: '花蓮縣', value: '鳳林鎮' },
		{ city: '花蓮縣', value: '玉里鎮' },
		{ city: '花蓮縣', value: '新城鄉' },
		{ city: '花蓮縣', value: '吉安鄉' },
		{ city: '花蓮縣', value: '壽豐鄉' },
		{ city: '花蓮縣', value: '秀林鄉' },
		{ city: '花蓮縣', value: '光復鄉' },
		{ city: '花蓮縣', value: '豐濱鄉' },
		{ city: '花蓮縣', value: '瑞穗鄉' },
		{ city: '花蓮縣', value: '萬榮鄉' },
		{ city: '花蓮縣', value: '富里鄉' },
		{ city: '花蓮縣', value: '卓溪鄉' },
		{ city: '臺東縣', value: '臺東市' },
		{ city: '臺東縣', value: '成功鎮' },
		{ city: '臺東縣', value: '關山鎮' },
		{ city: '臺東縣', value: '長濱鄉' },
		{ city: '臺東縣', value: '海端鄉' },
		{ city: '臺東縣', value: '池上鄉' },
		{ city: '臺東縣', value: '東河鄉' },
		{ city: '臺東縣', value: '鹿野鄉' },
		{ city: '臺東縣', value: '延平鄉' },
		{ city: '臺東縣', value: '卑南鄉' },
		{ city: '臺東縣', value: '金峰鄉' },
		{ city: '臺東縣', value: '大武鄉' },
		{ city: '臺東縣', value: '達仁鄉' },
		{ city: '臺東縣', value: '綠島鄉' },
		{ city: '臺東縣', value: '蘭嶼鄉' },
		{ city: '臺東縣', value: '太麻里鄉' },
		{ city: '澎湖縣', value: '馬公市' },
		{ city: '澎湖縣', value: '湖西鄉' },
		{ city: '澎湖縣', value: '白沙鄉' },
		{ city: '澎湖縣', value: '西嶼鄉' },
		{ city: '澎湖縣', value: '望安鄉' },
		{ city: '澎湖縣', value: '七美鄉' },
		{ city: '金門縣', value: '金城鎮' },
		{ city: '金門縣', value: '金湖鎮' },
		{ city: '金門縣', value: '金沙鎮' },
		{ city: '金門縣', value: '金寧鄉' },
		{ city: '金門縣', value: '烈嶼鄉' },
		{ city: '金門縣', value: '烏坵鄉' },
		{ city: '連江縣', value: '南竿鄉' },
		{ city: '連江縣', value: '北竿鄉' },
		{ city: '連江縣', value: '莒光鄉' },
		{ city: '連江縣', value: '東引鄉' }
	]

	function LoadData() {
		var home_address_city = document.getElementById("home_cities")
		var mail_address_city = document.getElementById("mail_cities")

		for (var i = 0; i < cities.length; i++) {
			var city = cities[i];
			var op = document.createElement("option");
			op.setAttribute("value", city.value);
			home_address_city.appendChild(op);
		}

		for (var i = 0; i < cities.length; i++) {
			var city = cities[i];
			var op = document.createElement("option");
			op.setAttribute("value", city.value);
			mail_address_city.appendChild(op);
		}
	}

	function UpdateData(label) {
		if (label == "home") {
			var address_area = document.getElementById("home_areas");
			var choice = document.getElementById("ha1").value;
			var area_input = document.getElementById("ha2");
		}
		else if (label == "mail") {
			var address_area = document.getElementById("mail_areas");
			var choice = document.getElementById("ma1").value;
			var area_input = document.getElementById("ma2");
		}
		// 清空選項與輸入框
		address_area.innerHTML = "";
		area_input.value = "";

		// 新增對應選項
		for (var j = 0; j < areas.length; j++) {
			var area = areas[j];
			if (area.city == choice) {
				var op = document.createElement("option");
				op.setAttribute("value", area.value);
				address_area.appendChild(op);
			}
		}
	}

	function CopyAddress() {
		var choice_city = document.getElementById("ha1").value;
		var choice_area = document.getElementById("ha2").value;
		var address_all = document.getElementById("ha3").value;

		document.getElementById("ma1").value = choice_city;
		document.getElementById("ma2").value = choice_area;
		document.getElementById("ma3").value = address_all;
	}

	function CheckVisitorId(){
		id_input = document.getElementById("id_visitor_id");
		id_ = id_input.value;
		let num = id_[0].charCodeAt() - 55;
		console.log(num % 10);
		
		checking = parseInt(num / 10) + (num % 10) * 9 + parseInt(id_[1]) * 8 + parseInt(id_[2]) * 7 + parseInt(id_[3]) * 6 + parseInt(id_[4]) * 5 + parseInt(id_[5]) * 4 + parseInt(id_[6]) * 3 + parseInt(id_[7]) * 2 + parseInt(id_[8]) + parseInt(id_[9]);

		if(checking % 10 != 0){
			id_input.style.backgroundColor = "red";
		}else{
			id_input.style.backgroundColor = "white";
		}
	}

	window.onload = function () {
		LoadData();
	}
</script>
{% endblock %}

<form action="" method="POST" autocomplete="off">
	{% csrf_token %}
	<div class="form-group">
		<div class="form-group col-md-6">
			<div onchange="CheckVisitorId()"><p>身分證字號：{{ form.visitor_id }}</p></div>
			<p>名稱：{{ form.visitor_name }}</p>
			<p>校友證字號：{{ form.Alumni_id }}</p>
			<p>連絡電話：{{ form.phone_num }}</p>
			<p>電子郵件：{{ form.email }}</p>

			<p>住家地址</p>
			<div>
				<input type="text" name="home_address_city" list="home_cities" onchange="UpdateData('home')" id="ha1">
				<datalist id="home_cities">
				</datalist>

				<input type="text" name="home_address_area" list="home_areas" id="ha2">
				<datalist id="home_areas">
				</datalist>

				<input type="text" name="home_address" id="ha3">
			</div>

			<p>通訊地址</p>
			<div>
				<input type="text" name="mail_address_city" list="mail_cities" onchange="UpdateData('mail')" id="ma1">
				<datalist id="mail_cities">
				</datalist>

				<input type="text" name="mail_address_area" list="mail_areas" id="ma2">
				<datalist id="mail_areas">
				</datalist>
				<input type="text" name="mail_address" id="ma3">
				<input type="checkbox" name="按鈕名稱" onchange="CopyAddress()">同住家地址
			</div>

			<input class="btn btn-success" type="submit" value="註冊" />
		</div>
	</div>
</form>